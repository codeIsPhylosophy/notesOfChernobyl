let ulList=document.querySelector(".blockList"),ulCollection=ulList.children,templateLi=document.querySelector("#createLi").content,selectLiButton=templateLi.querySelector(".origCheck"),toggleInput=document.querySelector(".toggle-all"),toggle=document.querySelector(".toggleLabel"),input=document.querySelector(".input_start"),clearCompleted=document.querySelector(".clearCompleted"),footer=document.querySelector(".footer"),counterItems=document.querySelector(".counterItems"),image=document.querySelector(".image"),headerImage=document.querySelector(".header__image"),headerTitle=document.querySelector(".superTitle"),paragraphWrap=document.querySelector(".paragraph-wrap"),count=0;input.addEventListener("keydown",(function(e){if("Enter"===e.key&&""!=input.value&&input.value.trim()){toggle.style.display="block",footer.style.display="flex";let e=templateLi.querySelector(".blockList__elem").cloneNode(!0),t=e.querySelector("p"),l=input.value;t.textContent=l,ulList.appendChild(e),input.value="",deleteNote(e),toggleColor(),toggleColorFragmentCode(),changeP(toggle),countItemsFunction(),editorFunction(),footerMenu(),footerFocus(),fixInput()}}));let deleteNote=e=>{e.querySelector(".closeMe").addEventListener("click",(function(){e.remove(),visor(ulCollection),toggleColorFragmentCode(),countItemsFunction()}))};function visor(e){0===e.length?(toggle.style.display="none",footer.style.display="none"):(toggle.style.display="block",footer.style.display="flex")}let viewClearCompleted=e=>{e.addEventListener("click",(function(){let t=e.querySelectorAll(".origCheck");for(let e=0;e<t.length;e++){if(t[e].checked){clearCompleted.style.display="block";break}clearCompleted.style.display="none"}changeP(ulList)}))},selectAllMarker=()=>{toggle.addEventListener("click",(function(){let e=ulList.querySelectorAll(".origCheck");if(toggleInput.checked){for(let t of e)t.checked=!1;clearCompleted.style.display="none"}else{for(let t of e)t.checked=!0;clearCompleted.style.display="block"}}))},toggleColor=()=>{ulList.addEventListener("change",(function(){let e=ulList.querySelectorAll(".origCheck"),t=[];for(let l=0;l<e.length;l++)!0===e[l].checked&&t.push(e[l]);t.length===e.length?toggleInput.checked=!0:toggleInput.checked=!1}))},toggleColorFragmentCode=()=>{let e=ulList.querySelectorAll(".origCheck"),t=[];for(let l=0;l<e.length;l++)!0===e[l].checked&&t.push(e[l]);t.length===e.length?toggleInput.checked=!0:toggleInput.checked=!1},changeP=e=>{e.addEventListener("click",(function(){let e=ulList.querySelectorAll(".origCheck"),t=ulList.querySelectorAll(".blockList__elem");for(let l=0;l<e.length;l++)if(!0===e[l].checked){t[l].querySelector("p").classList.add("selectP"),fixInput()}else{t[l].querySelector("p").classList.remove("selectP"),fixInput()}countItemsFunction()}))},clearCompletedButton=()=>{clearCompleted.addEventListener("click",(function(){let e=ulList.querySelectorAll(".origCheck"),t=ulList.querySelectorAll(".blockList__elem");for(let l=0;l<e.length;l++)e[l].checked&&t[l].remove();clearCompleted.style.display="none",visor(ulCollection)}))},footerMenu=()=>{document.querySelector(".selectButtons").addEventListener("click",(function(e){e.target.classList.contains("activeBut")?activeFunction():e.target.classList.contains("completedBut")?completedFunction():e.target.classList.contains("allBut")&&allFunction()}))},footerFocus=()=>{const e=document.querySelectorAll("ul.selectButtons a");for(const t of e)t.addEventListener("click",(l=>{for(const t of e)t.parentElement.classList.remove("focus");t.parentElement.classList.add("focus")}))},fixInput=()=>{let e=document.querySelectorAll("ul.selectButtons li");for(let t=0;t<e.length;t++)e[0].classList.contains("focus")?allFunction():e[1].classList.contains("focus")?activeFunction():e[2].classList.contains("focus")&&completedFunction()},completedFunction=()=>{let e=ulList.querySelectorAll(".origCheck"),t=ulList.querySelectorAll(".blockList__elem");for(let l=0;l<e.length;l++)!1===e[l].checked?t[l].style.display="none":t[l].style.display="flex"},activeFunction=()=>{let e=ulList.querySelectorAll(".origCheck"),t=ulList.querySelectorAll(".blockList__elem");for(let l=0;l<e.length;l++)e[l].checked?t[l].style.display="none":t[l].style.display="flex"},allFunction=()=>{let e=ulList.querySelectorAll(".blockList__elem");for(let t=0;t<e.length;t++)e[t].style.display="flex"},countItemsFunction=()=>{let e=ulList.querySelectorAll(".blockList__elem"),t=ulList.querySelectorAll(".origCheck"),l=[];for(let o=0;o<t.length;o++)!1===t[o].checked&&l.push(e[o]);let o=1===l.length?" item":" items";return counterItems.textContent=l.length+o+" left"},editorFunction=()=>{let e=ulList.querySelectorAll(".blockList__elem");for(let t=0;t<e.length;t++)e[t].addEventListener("dblclick",(()=>{let l=e[t].querySelector(".editorInput"),o=e[t].querySelector("p");l.style.display="block",l.focus(),l.value=o.textContent.trim(),e[t].addEventListener("keydown",(c=>{"Enter"!==c.key&&"Escape"!==c.key||(""!==l.value&&l.value.trim()?(l.style.display="none",o.textContent=l.value,l.style.outline="1px solid #16d0ff66"):(e[t].remove(),visor(ulCollection)))}))}))},easterEgg=()=>{headerImage.addEventListener("click",(function(){count++,26===count?(image.src="images/cat.jpg",headerTitle.textContent="THE EASTER CAT!",input.placeholder="Congratulations! You found the Easter cat!"):30===count&&dateDead()}))},dateDead=()=>{let e=document.querySelector(".input_start"),t=(new Date).getFullYear()-1986;"easter cat"===e.value&&(e.value="It's been "+t+" years")};clearCompletedButton(),viewClearCompleted(ulList),selectAllMarker(),footerMenu(),countItemsFunction(),easterEgg(),dateDead();